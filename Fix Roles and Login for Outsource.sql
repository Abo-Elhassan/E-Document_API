
---------------------*Insert Basic Roles For Missing DP World Employees*-----------------------------------
GO

INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50005','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50017','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50052','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50098','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50106','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50119','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50128','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50162','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50165','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50171','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50177','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50178','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50236','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50268','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50274','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50283','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50290','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50320','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50334','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50398','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50399','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50400','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50401','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50409','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50410','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50411','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50438','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50453','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50505','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50522','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50533','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50547','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50558','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50567','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50568','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50573','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50578','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50593','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50614','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50616','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50622','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50632','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50643','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50664','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50666','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50668','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50700','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50701','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50748','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50754','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50755','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50756','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50759','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50778','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50780','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50801','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50812','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50821','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50822','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50844','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50849','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50875','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50879','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50890','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50946','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50966','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50972','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50973','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50985','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('50986','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51010','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51029','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51045','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51069','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51075','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51111','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51123','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51127','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51261','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51314','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51353','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51362','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51412','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51426','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51447','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51451','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51461','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51475','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51477','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51480','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51488','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51508','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51512','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51684','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('51686','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('80102','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('90023','7ef3ba68-78e3-457a-9419-aed440b0253b');
INSERT INTO [security].[UserRoles] (UserId,RoleId) VALUES ('90024','7ef3ba68-78e3-457a-9419-aed440b0253b');

GO

---------------------------------* Delete Roles For Outsource Labor *--------------------------------------

DELETE FROM [security].[UserRoles]
WHERE UserId in (SELECT u.id 
FROM [security].[User] u , [security].[UserRoles] r
where u.Id = r.UserId  and u.Company !='DP World');

GO
-------------* Make Outsource Labor Cannot Login With Their LDAP Until Update UserNames *------------------

UPDATE [security].[User] 
SET HasLDAP = 0 
WHERE Id IN (  SELECT Id FROM [security].[User] WHERE Company !='DP World' AND  HasLDAP = 1 );

GO

-----------* Update ReviewerType as DepartmentManager for Ahmez Zaki To enable Approve form Emails * -------

update DefinedRequestReviewer set ReviewerType = 'DepartmentManager' where AssignedReviewerId = '50269'
GO

--------------------------* Make CreatedBy &  [ModifiedBy] Allow null *-------------------------------------

ALTER TABLE [audit].[AuditRole]
ALTER COLUMN [CreatedBy] [nvarchar](max) NULL;

ALTER TABLE [audit].[AuditRole]
ALTER COLUMN [ModifiedBy] [nvarchar](max) NULL;

-------------------------------* Remove Finance Role From Members Not included in PO Cycle*---------------------------------------------
UPDATE [security].[User] SET Roles = 'Basic' WHERE DepartmentId=9;
UPDATE [security].[User] SET Roles = 'Basic,Finance_Po' WHERE Id IN('51510','51653','51682','51640');
UPDATE [security].[User] SET Roles = 'Basic,Finance_Po,Finance_FuelOil' WHERE Id ='51510';
GO
Delete [security].[UserRoles] where UserId NOT IN (
'51510',
'51653',
'51682',
'51640') and RoleId ='c3f87f77-415a-45da-8587-50221963b560';